geom_point(mapping = aes(x = Study, y = odds_ratio_bcg)) +
coord_flip()
or_graph
or_graph <- ggplot(BCG) +
geom_bar(mapping = aes(x = Study, y = odds_ratio_bcg)) +
coord_flip()
or_graph
or_graph <- ggplot(BCG) +
geom_histogram(mapping = aes(x = Study, y = odds_ratio_bcg)) +
coord_flip()
or_graph
or_graph <- ggplot(BCG) +
geom_vline(mapping = aes(x = Study, y = odds_ratio_bcg))
or_graph
or_table <- BCG %>%
select(Study, odds_ratio_bcg) %>%
summarise(BCG, mean_run =mean(odds_ratio_bcg))
or_table <- BCG %>%
select(Study, odds_ratio_bcg) %>%
summarise(odds_ratio_bcg, mean_run =mean(odds_ratio_bcg))
BCG$rr_bcg <- (BCG$BCGTB / BCG$BCGVacc) / (BCG$NoVaccTB / BCG$NoVacc)
yr_bcg <- BCG %>%
arrange(-Year)
View(yr_bcg)
yr_bcg <- BCG %>%
arrange(Year)
install.packages('MASS')
library('MASS')
data("birthwt", package = "MASS")
install.packages('Epi')
data("birthwt")
force(birthwt)
library('Epi')
data("bdendo", package = "Epi")
or_table <- BCG %>%
select(Study, odds_ratio_bcg)
or_table <- BCG %>%
select(BCG, Study, odds_ratio_bcg)
or_table <- BCG %>%
filter(Study, odds_ratio_bcg)
View(or_table)
or_table <- BCG %>%
select(Study, odds_ratio_bcg)
or_table <- BCG %>%
select(., Study, odds_ratio_bcg)
yr_or_graph <- ggplot(yr_bcg, aes(x = Year, y = odds_ratio_bcg))+
geom_histogram()
yr_or_graph
yr_or_graph <- ggplot(yr_bcg, aes(x = Year, y = odds_ratio_bcg))+
geom_col()
yr_or_graph
yr_or_graph <- ggplot(yr_bcg, aes(x = Year, y = odds_ratio_bcg))+
geom_col()+
coord_flip()
yr_or_graph
lat_bcg <- BCG %>%
arrange(Latitude)
lat_or_graph <- ggplot(lat_bcg, aes(x = Latitude, y = odds_ratio_bcg))+
geom_col()
lat_or_graph
lat_or_graph <- ggplot(lat_bcg, aes(x = Latitude, y = odds_ratio_bcg))+
geom_col()+
coord_flip()
or_table <- BCG %>%
select(Study, odds_ratio_bcg, Year)
require(MASS)
require(dplyr)
or_table <- BCG %>%
select(Study, odds_ratio_bcg, Year)
require(MASS)
require(dplyr)
or_table <- BCG %>%
select(Study, odds_ratio_bcg, Year)
require(MASS)
require(dplyr)
or_table <- BCG %>%
dplyr::select(Study, odds_ratio_bcg, Year)
View(or_table)
require(MASS)
require(dplyr)
or_table <- BCG %>%
dplyr::select(Study, odds_ratio_bcg)
View(birthwt)
or_graph <- ggplot(BCG, aes(x = Study, y = odds_ratio_bcg))
rr_or_graph <- or_graph + ggplot(aes(y = rr_bcg)) +
geom_point() +
geom_smooth()
or_graph <- ggplot(BCG, aes(x = Study, y = odds_ratio_bcg))
rr_or_graph <- or_graph + ggplot(aes(x = Study, y = rr_bcg)) +
geom_point() +
geom_smooth()
or_graph <- ggplot(BCG, aes(x = Study, y = odds_ratio_bcg))
rr_or_graph <- or_graph + ggplot(aes(x = Study, y = rr_bcg)) +
geom_col() +
geom_smooth()
rr_or_graph <- ggplot(aes(x = Study)) +
geom_col(aes(y = odds_ratio_bcg)) +
geom_col(aes(y = rr_bcg))
rr_or_graph <- ggplot(aes(x = Study)) +
geom_col(aes(y = odds_ratio_bcg))
rr_or_graph <- ggplot(BCG, aes(x = Study)) +
geom_col(aes(y = odds_ratio_bcg)) +
geom_col(aes(y = rr_bcg))
rr_or_graph
view(or_table)
rr_or_graph <- ggplot(BCG, aes(x = Study)) +
geom_point(aes(y = odds_ratio_bcg)) +
geom_point(aes(y = rr_bcg)) +
scale_y_continuous(
name = "Odds ratio of BCG",
sec_axis = sec_axis(~., name="Price ($)")
)+
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph <- ggplot(BCG, aes(x = Study)) +
geom_point(aes(y = odds_ratio_bcg)) +
geom_point(aes(y = rr_bcg))
rr_or_graph
rr_or_graph <- ggplot(BCG, aes(x = Study)) +
geom_point(aes(y = odds_ratio_bcg)) +
geom_point(aes(y = rr_bcg)) +
scale_y_continuous(
name = "Odds ratio of BCG",
sec_axis = sec_axis(name="Relative ratio of BCG")
)+
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph <- ggplot(BCG, aes(x = Study)) +
geom_point(aes(y = odds_ratio_bcg)) +
geom_point(aes(y = rr_bcg)) +
scale_y_continuous(
name = "Odds ratio of BCG",
sec_axis = dup_axis())
+
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph <- ggplot(BCG, aes(x = Study)) +
geom_point(aes(y = odds_ratio_bcg)) +
geom_point(aes(y = rr_bcg)) +
scale_y_continuous(
name = "Odds ratio of BCG",
sec_axis = dup_axis())
rr_or_graph <- ggplot(BCG, aes(x = Study)) +
geom_point(aes(y = odds_ratio_bcg)) +
geom_point(aes(y = rr_bcg)) +
ggplot::scale_y_continuous(
name = "Odds ratio of BCG",
sec_axis = dup_axis())+
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph <- ggplot(BCG, aes(x = Study)) +
geom_point(aes(y = odds_ratio_bcg)) +
geom_point(aes(y = rr_bcg)) +
ggplot2::scale_y_continuous(
name = "Odds ratio of BCG",
sec_axis = dup_axis())+
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph <- ggplot(BCG) +
geom_point(mapping = aes(x = Study, y = odds_ratio_bcg)) +
geom_point(mapping = aes(x = Study, y = rr_bcg)) +
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph
rr_or_graph <- ggplot(BCG) +
geom_bar(mapping = aes(x = Study, y = odds_ratio_bcg)) +
geom_bar(mapping = aes(x = Study, y = rr_bcg)) +
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph
rr_or_graph <- ggplot(BCG) +
geom_line(mapping = aes(x = Study, y = odds_ratio_bcg)) +
geom_line(mapping = aes(x = Study, y = rr_bcg)) +
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph <- ggplot(BCG) +
geom_line(mapping = aes(x = Study, y = odds_ratio_bcg)) +
geom_line(mapping = aes(x = Study, y = rr_bcg)) +
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph
rr_or_graph <- ggplot(BCG) +
geom_line(mapping = aes(x = Study, y = odds_ratio_bcg, color='darkblue')) +
geom_line(mapping = aes(x = Study, y = rr_bcg)) +
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph
rr_or_graph <- ggplot(BCG) +
geom_line(mapping = aes(x = Study, y = odds_ratio_bcg, color='Odds ratio')) +
geom_line(mapping = aes(x = Study, y = rr_bcg, color="Relative ratio")) +
ggtitle("Odd ratio versus Relative ratio of BCG")
rr_or_graph
rr_or_graph <- ggplot(BCG) +
geom_line(mapping = aes(x = Study, y = odds_ratio_bcg, color='Odds ratio')) +
geom_line(mapping = aes(x = Study, y = rr_bcg, color="Relative ratio")) +
ggtitle("Odd ratio versus Relative ratio of BCG")+
scale_y_continuous("Compare ratios")
rr_or_graph
birthwt$low_prop <- mean(birthwt == 1)
birthwt$low_prop <- mean(birthwt$low == 1)
summ_bw <- birthwt %>%
mean(birthwt$low == 1)
summ_bw <- birthwt %>%
summarise(mean(birthwt$low == 1))
View(summ_bw)
data("birthwt", package = "MASS")
summ_bw <- birthwt %>%
summarise(mean(birthwt$low == 1))
View(birthwt)
summ_bw <- birthwt %>%
summarise(mean(birthwt$low == 1),
mean(birthwt$smoke == 1),
mean(birthwt$age))
summ_bw <- birthwt %>%
summarise(mean(birthwt$low == 1),
mean(birthwt$smoke == 1),
mean(birthwt$age),
max(birthwt$race))
View(birthwt)
summ_bw <- birthwt %>%
summarise(mean(birthwt$low == 1),
mean(birthwt$smoke == 1),
mean(birthwt$age),
max(birthwt$race)) %>%
setNames(., c('low weight prop', 'smoke prop', 'age mean','max num race' ))
View(bdendo)
summ_bw <- birthwt %>%
summarise(mean(birthwt$low == 1),
mean(birthwt$smoke == 1),
mean(birthwt$age),
mean(birthwt$bwt),
mean(birthwt$ptl == 1),
mean(birthwt$ht ==1)) %>%
setNames(., c('low weight prop', 'smoke prop', 'age mean','birth weight mean', 'prop of previous premature labours',
'prop of history of hypertension'))
View(summ_bw)
rr_function <- function(exp_risk, exp_norisk, unex_risk, unex_norisk) {
relative_ratio <- (exp_risk / (exp_risk + exp_norisk)) / (unex_risk / (unex_risk + unex_norisk))
}
View(completeFun)
smok_rr <- rr_function(birthwt$smoke == 1 & birthwt$low == 1, birthwt$smoke == 1 & birthwt$low == 0,
birthwt$smoke == 0 & birthwt$low == 1, birthwt$smoke == 0 & birthwt$low == 0)
view(smok_rr)
smok_rr <- rr_function(mean(birthwt$smoke == 1) & mean(birthwt$low == 1), mean(birthwt$smoke == 1) & mean(birthwt$low == 0),
mean(birthwt$smoke == 0) & mean(birthwt$low == 1), mean(birthwt$smoke == 0) & mean(birthwt$low == 0))
smok_rr <- rr_function(mean(birthwt$smoke == 1) & mean(birthwt$low == 1), mean(birthwt$smoke == 1) & mean(birthwt$low == 0),
mean(birthwt$smoke == 0) & mean(birthwt$low == 1), mean(birthwt$smoke == 0) & mean(birthwt$low == 0))
smok_rr
hyp_rr <- rr_function(mean(birthwt$ht == 1) & mean(birthwt$low == 1), mean(birthwt$ht == 1) & mean(birthwt$low == 0),
mean(birthwt$ht == 0) & mean(birthwt$low == 1), mean(birthwt$ht == 0) & mean(birthwt$low == 0))
mean(birthwt$smoke == 1)
smok_rr <- rr_function(mean(birthwt$smoke == 1) * mean(birthwt$low == 1), mean(birthwt$smoke == 1) * mean(birthwt$low == 0),
mean(birthwt$smoke == 0) * mean(birthwt$low == 1), mean(birthwt$smoke == 0) * mean(birthwt$low == 0))
smok_rr
mean(birthwt$smoke == 1) * mean(birthwt$low == 1)
hyp_rr <- rr_function(mean(birthwt$ht == 1) * mean(birthwt$low == 1), mean(birthwt$ht == 1) * mean(birthwt$low == 0),
mean(birthwt$ht == 0) * mean(birthwt$low == 1), mean(birthwt$ht == 0) * mean(birthwt$low == 0))
mean(birthwt$smoke == 0) * mean(birthwt$low == 0)
mean(birthwt$smoke == 0)
rr_function <- function(exp_risk, exp_norisk, unex_risk, unex_norisk) {
relative_ratio <- (exp_risk / (exp_risk + exp_norisk)) / (unex_risk / (unex_risk + unex_norisk))
relative_ratio
}
# visualization
smok_rr <- rr_function(mean(birthwt$smoke == 1) * mean(birthwt$low == 1), mean(birthwt$smoke == 1) * mean(birthwt$low == 0),
mean(birthwt$smoke == 0) * mean(birthwt$low == 1), mean(birthwt$smoke == 0) * mean(birthwt$low == 0))
hyp_rr <- rr_function(mean(birthwt$ht == 1) * mean(birthwt$low == 1), mean(birthwt$ht == 1) * mean(birthwt$low == 0),
mean(birthwt$ht == 0) * mean(birthwt$low == 1), mean(birthwt$ht == 0) * mean(birthwt$low == 0))
rr_function <- function(exp_risk, exp_norisk, unex_risk, unex_norisk) {
relative_ratio <- (exp_risk / (exp_risk + exp_norisk)) / (unex_risk / (unex_risk + unex_norisk))
return(relative_ratio)
}
# visualization
smok_rr <- rr_function(mean(birthwt$smoke == 1) * mean(birthwt$low == 1), mean(birthwt$smoke == 1) * mean(birthwt$low == 0),
mean(birthwt$smoke == 0) * mean(birthwt$low == 1), mean(birthwt$smoke == 0) * mean(birthwt$low == 0))
hyp_rr <- rr_function(mean(birthwt$ht == 1) * mean(birthwt$low == 1), mean(birthwt$ht == 1) * mean(birthwt$low == 0),
mean(birthwt$ht == 0) * mean(birthwt$low == 1), mean(birthwt$ht == 0) * mean(birthwt$low == 0))
pren_care_rr <- rr_function(mean(birthwt$ptl == 1) * mean(birthwt$low == 1), mean(birthwt$ptl == 1) * mean(birthwt$low == 0),
mean(birthwt$ptl == 0) * mean(birthwt$low == 1), mean(birthwt$ptl == 0) * mean(birthwt$low == 0))
mean(birthwt$age = > 20)
mean(birthwt$age > 20)
before20_rr <- rr_function(mean(birthwt$age > 20) * mean(birthwt$low == 1), mean(birthwt$age <= 20) * mean(birthwt$low == 0),
mean(birthwt$age > 20) * mean(birthwt$low == 1), mean(birthwt$age <= 20) * mean(birthwt$low == 0))
smok_rr <- rr_function(mean(birthwt$smoke == 1 & birthwt$low == 1), mean(birthwt$smoke == 1 & birthwt$low == 0),
mean(birthwt$smoke == 0 & birthwt$low == 1), mean(birthwt$smoke == 0 & birthwt$low == 0))
hyp_rr <- rr_function(mean(birthwt$ht == 1& birthwt$low == 1), mean(birthwt$ht == 1 & birthwt$low == 0),
mean(birthwt$ht == 0) & birthwt$low == 1), mean(birthwt$ht == 0 & birthwt$low == 0)
hyp_rr <- rr_function(mean(birthwt$ht == 1 & birthwt$low == 1), mean(birthwt$ht == 1 & birthwt$low == 0),
mean(birthwt$ht == 0 & birthwt$low == 1), mean(birthwt$ht == 0 & birthwt$low == 0))
pren_care_rr <- rr_function(mean(birthwt$ptl == 1 & birthwt$low == 1), mean(birthwt$ptl == 1 & birthwt$low == 0),
mean(birthwt$ptl == 0 & birthwt$low == 1), mean(birthwt$ptl == 0 & birthwt$low == 0))
before20_rr <- rr_function(mean(birthwt$age > 20 & birthwt$low == 1), mean(birthwt$age <= 20 & birthwt$low == 0),
mean(birthwt$age > 20 & birthwt$low == 1), mean(birthwt$age <= 20 & birthwt$low == 0))
before20_rr <- rr_function(mean(birthwt$age > 20 & birthwt$low == 1), mean(birthwt$age <= 20 & birthwt$low == 0),
mean(birthwt$age > 20 & birthwt$low == 1), mean(birthwt$age <= 20 & birthwt$low == 0))
View(bdendo)
view(summ_bw)
kable(summ_bw, caption = "Summary of Low Birth Weight dataset")
library(knitr)
kable(summ_bw, caption = "Summary of Low Birth Weight dataset")
kable(or_table, caption = "Odds ratio for each study")
or_table <- BCG %>%
dplyr::select(Study, odds_ratio_bcg) %>%
rename('odd ratio' = odds_ratio_bcg)
kable(or_table, caption = "Odds ratio for each study")
rr_data <- data.frame(smok_rr, hyp_rr, pren_care_rr, before20_rr)
View(rr_data)
compare_rr <- ggplot(rr_data) +
geom_bar(aes(x = col, y = row))
compare_rr
compare_rr <- ggplot(rr_data) +
geom_bar(aes(x = colnames(), y = row))
compare_rr
rr_data <- rownames(rr)
rr_data$rr <- rownames(rr_data)
compare_rr <- ggplot(rr_data) +
geom_bar(aes(x = rr, y = value))
compare_rr
rr_data <- data.frame(smok_rr, hyp_rr, pren_care_rr, before20_rr)
rr_data <- rr_data %>%
rename(smok_rr = 'smoking status relative ratio', hyp_rr = 'Hypertension status relative ratio',
pren_care_rr = 'Attending 0 prenatal care visits relative ratio',
before20_rr = 'Giving birth before age 20 relative ratio')
rr_data <- rr_data %>%
setNames(., c('smoking status relative ratio', 'Hypertension status relative ratio',
'Attending 0 prenatal care visits relative ratio',
'Giving birth before age 20 relative ratio'))
kable(rr_data, caption = "Relative ratio of each factors")
hyp = with(bdendo, table(d, hyp, set))
mh_hyp = mh(hyp["1",,], hyp["0",,], compare = "hyp", levels = c(2, 1))
hyp_or <- c(mh_hyp$ratio, mh_hyp$cl.lower, mh_hyp$cl.upper)
names(hyp_or) <- c("Odds ratio", "CI lower", "CI upper")
round(hyp_or, 3)
hyp_tab <- data.frame(hyp_or)
View(hyp_tab)
# Presence of Gall bladder disease
gall = with(bdendo, table(d, gall, set))
mh_gall = mh(gall["1",,], gall["0",,], compare = "Gall", levels = c(2, 1))
gall_or <- c(mh_gall$ratio, mh_gall$cl.lower, mh_gall$cl.upper)
names(gall_or) <- c("Odds ratio", "CI lower", "CI upper")
round(gall_or, 3)
gall_tab <- data.frame(gall_or)
gall = with(bdendo, table(d, gall, set))
mh_gall = mh(gall["1",,], gall["0",,], compare = "Gall", levels = c(2, 1))
gall_or <- c(mh_gall$ratio, mh_gall$cl.lower, mh_gall$cl.upper)
names(gall_or) <- c("Odds ratio", "CI lower", "CI upper")
round(gall_or, 3)
gall_tab <- data.frame(gall_or)
gall = with(bdendo, table(d, gall, set))
mh_gall = mh(gall["1",,], gall["0",,], compare = "gall", levels = c(2, 1))
gall_or <- c(mh_gall$ratio, mh_gall$cl.lower, mh_gall$cl.upper)
names(gall_or) <- c("Odds ratio", "CI lower", "CI upper")
round(gall_or, 3)
gall_tab <- data.frame(gall_or)
ob = with(bdendo, table(d, ob, set))
mh_ob = mh(ob["1",,], ob["0",,], compare = "ob", levels = c(2, 1))
ob_or <- c(mh_ob$ratio, mh_ob$cl.lower, mh_ob$cl.upper)
names(ob_or) <- c("Odds ratio", "CI lower", "CI upper")
round(ob_or, 3)
ob_tab <- data.frame(ob_or)
knitr::opts_chunk$set(echo = TRUE)
kable(or_table, caption = "Odds ratio for each study")
plot(yr_or_graph)
plot(yr_or_graph)
yr_bcg <- BCG %>%
arrange(Year) %>%
rename('odd ratio' = odds_ratio_bcg)
yr_or_graph <- ggplot(yr_bcg, aes(x = Year, y = odds_ratio_bcg))+
geom_col()+
coord_flip()
lat_bcg <- BCG %>%
arrange(Latitude) %>%
rename('odd ratio' = odds_ratio_bcg)
lat_or_graph <- ggplot(lat_bcg, aes(x = Latitude, y = odds_ratio_bcg))+
geom_col()+
coord_flip()
plot(yr_or_graph)
View(yr_bcg)
plot(yr_or_graph)
plot(yr_or_graph)
plot(yr_or_graph)
plot(yr_or_graph)
plot(yr_or_graph)
# Script in which you should do your analysis described on Canvas
library('dplyr')
# Tuberculosis analysis using HSAUR package
# set up
library('HSAUR')
data("BCG", package = "HSAUR")
# Calculate odds ratio for each study with new columns
BCG$Vacc_noTB <- BCG$BCGVacc - BCG$BCGTB
BCG$noVacc_noTB <- BCG$NoVacc - BCG$NoVaccTB
BCG$odds_ratio_bcg <- (BCG$BCGTB / BCG$Vacc_noTB) / (BCG$NoVaccTB / BCG$noVacc_noTB)
# visualization of oods ratio of BCG
require(MASS)
require(dplyr)
or_table <- BCG %>%
dplyr::select(Study, odds_ratio_bcg)
# visualizations of relationships of year and latitude
yr_bcg <- BCG %>%
arrange(Year)
yr_or_graph <- ggplot(yr_bcg, aes(x = Year, y = odds_ratio_bcg))+
geom_col()+
coord_flip()
lat_bcg <- BCG %>%
arrange(Latitude)
lat_or_graph <- ggplot(lat_bcg, aes(x = Latitude, y = odds_ratio_bcg))+
geom_col()+
coord_flip()
# Compare RR versus OR with scatterplots
BCG$rr_bcg <- (BCG$BCGTB / BCG$BCGVacc) / (BCG$NoVaccTB / BCG$NoVacc)
rr_or_graph <- ggplot(BCG) +
geom_line(mapping = aes(x = Study, y = odds_ratio_bcg, color='Odds ratio')) +
geom_line(mapping = aes(x = Study, y = rr_bcg, color="Relative ratio")) +
ggtitle("Odd ratio versus Relative ratio of BCG")+
scale_y_continuous("Compare ratios")
# Low Birth Weight using MASS package
# set up
library('MASS')
data("birthwt", package = "MASS")
# basic summary
summ_bw <- birthwt %>%
summarise(mean(birthwt$low == 1),
mean(birthwt$smoke == 1),
mean(birthwt$age),
mean(birthwt$bwt),
mean(birthwt$ptl == 1),
mean(birthwt$ht ==1)) %>%
setNames(., c('low weight prop', 'smoke prop', 'age mean','birth weight mean', 'prop of previous premature labours',
'prop of history of hypertension'))
# function to calculate relative risks
rr_function <- function(exp_risk, exp_norisk, unex_risk, unex_norisk) {
relative_ratio <- (exp_risk / (exp_risk + exp_norisk)) / (unex_risk / (unex_risk + unex_norisk))
return(relative_ratio)
}
# visualization
smok_rr <- rr_function(mean(birthwt$smoke == 1 & birthwt$low == 1), mean(birthwt$smoke == 1 & birthwt$low == 0),
mean(birthwt$smoke == 0 & birthwt$low == 1), mean(birthwt$smoke == 0 & birthwt$low == 0))
hyp_rr <- rr_function(mean(birthwt$ht == 1 & birthwt$low == 1), mean(birthwt$ht == 1 & birthwt$low == 0),
mean(birthwt$ht == 0 & birthwt$low == 1), mean(birthwt$ht == 0 & birthwt$low == 0))
pren_care_rr <- rr_function(mean(birthwt$ptl == 1 & birthwt$low == 1), mean(birthwt$ptl == 1 & birthwt$low == 0),
mean(birthwt$ptl == 0 & birthwt$low == 1), mean(birthwt$ptl == 0 & birthwt$low == 0))
before20_rr <- rr_function(mean(birthwt$age > 20 & birthwt$low == 1), mean(birthwt$age <= 20 & birthwt$low == 0),
mean(birthwt$age > 20 & birthwt$low == 1), mean(birthwt$age <= 20 & birthwt$low == 0))
rr_data <- data.frame(smok_rr, hyp_rr, pren_care_rr, before20_rr)
rr_data <- rr_data %>%
setNames(., c('smoking status relative ratio', 'Hypertension status relative ratio',
'Attending 0 prenatal care visits relative ratio',
'Giving birth before age 20 relative ratio'))
# Endometrial Cancer
# set up
library('Epi')
data("bdendo", package = "Epi")
# calculate odds ratio of each factor
# Hypertension status
hyp = with(bdendo, table(d, hyp, set))
mh_hyp = mh(hyp["1",,], hyp["0",,], compare = "hyp", levels = c(2, 1))
hyp_or <- c(mh_hyp$ratio, mh_hyp$cl.lower, mh_hyp$cl.upper)
names(hyp_or) <- c("Odds ratio", "CI lower", "CI upper")
round(hyp_or, 3)
hyp_tab <- data.frame(hyp_or)
# Presence of Gall bladder disease
gall = with(bdendo, table(d, gall, set))
mh_gall = mh(gall["1",,], gall["0",,], compare = "gall", levels = c(2, 1))
gall_or <- c(mh_gall$ratio, mh_gall$cl.lower, mh_gall$cl.upper)
names(gall_or) <- c("Odds ratio", "CI lower", "CI upper")
round(gall_or, 3)
gall_tab <- data.frame(gall_or)
# Obesity
ob = with(bdendo, table(d, ob, set))
mh_ob = mh(ob["1",,], ob["0",,], compare = "ob", levels = c(2, 1))
ob_or <- c(mh_ob$ratio, mh_ob$cl.lower, mh_ob$cl.upper)
names(ob_or) <- c("Odds ratio", "CI lower", "CI upper")
round(ob_or, 3)
ob_tab <- data.frame(ob_or)
plot(yr_or_graph)
plot(lat_or_graph)
plot(rr_or_graph)
plot(rr_or_graph)
kable(hyp_tab, caption = "Odd ratio of Hypertension status")
kable(gall_tab, caption = "Odd ratio of Presence of Gall bladder disease")
kable(ob_tab, caption = "Odd ratio of Obesity")
plot(rr_or_graph)
kable(summ_bw, caption = "Summary of Low Birth Weight dataset")
kable(rr_data, caption = "Relative ratio of each factors")
kable(or_table, caption = "Odds ratio for each study")
plot(lat_or_graph)
kable(or_table, caption = "Odds ratio for each study")
View(BCG)
kable(summ_bw, caption = "Summary of Low Birth Weight dataset")
kable(rr_data, caption = "Relative risk of each factors")
kable(hyp_tab, caption = "Odd ratio of Hypertension status")
library(ggplot2)
library("gdata")
library(tidyverse)
library(maps)
library("rworldmap")
library("classInt")
water_data <- read.csv("water2.csv", stringsAsFactors = FALSE)
water_data_map <- data.frame(water_data$Geographic.Area, water_data$X2017_Proportion.of.population.using.unimproved.drinking.water.sources)
water_data_map <-water_data_map %>%
rename(
Country = water_data.Geographic.Area,
`Proportion Using Unimproved Sources of Drinking Water` = water_data.X2017_Proportion.of.population.using.unimproved.drinking.water.sources
)
water_data_map <- remove_missing(water_data_map)
water_data_map_joined <- joinCountryData2Map(water_data_map
, joinCode = "NAME"
, nameJoinColumn = "Country")
classInt <- classInt::classIntervals( water_data_map_joined[["Proportion Using Unimproved Sources of Drinking Water"]], n=5, style="jenks")
catMethod = classInt[["brks"]]
colourPalette <- RColorBrewer::brewer.pal(5,'BuGn')
mapParams <- mapCountryData( water_data_map_joined
, nameColumnToPlot="Proportion Using Unimproved Sources of Drinking Water"
, addLegend=FALSE
, catMethod = catMethod
, colourPalette = colourPalette )
do.call( addMapLegend , c( mapParams
, legendLabels="all"
, legendWidth=0.5
, legendIntervals="data" , legendMar = 2 ) )
shiny::runApp()
